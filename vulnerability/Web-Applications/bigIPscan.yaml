config:
  name: "Big-IP Version Scanner"
  author: "Rikunj Sindhwad"
  usage: "./Task-Ninja -w bigIPscan.yaml -v url_list=urls.txt"
  defaultimage: "alpine:latest"
  hive: "hive"
  logs: false
vars:
  url_list: ""
tasks:
  - name: bigip_check
    silent: true
    parallel: true
    image: "robensive/bigipscanner:latest"
    type: dynamic
    dynamicFile: "{{url_list}}"
    threads: 10
    cmds:
      - '-t {{dynamicFile}} {{hiveout}}/output.txt'
  - name: Merge
    silent: true
    parallel: false
    required:
      - bigip_check
    mounts:
      - bigip_check
    cmds:
      - 'find {{{bigip_check:folder}}} -name output.txt -type f -exec cat {} \; |sort -n | uniq > {{hiveout}}/output.txt'
  - name: Result
    silent: false
    parallel: false
    required:
      - Merge
    mounts:
      - Merge
    cmds:
      - 'cp {{{Merge:file}}} {{hiveout}}/result.txt'
      - echo 'Result saved in {{hosthiveout}}/result.txt'
